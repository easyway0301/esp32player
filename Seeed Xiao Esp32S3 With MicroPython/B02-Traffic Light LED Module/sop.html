<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ESP32-S3 MicroPython ç´…ç¶ ç‡ˆï¼ˆTimer å®šæ™‚å™¨ï¼‰æ•™å­¸</title>

<style>
body {
    font-family: Arial, "Microsoft JhengHei", sans-serif;
    line-height: 1.9;
    max-width: 980px;
    margin: 40px auto;
    padding: 0 20px;
    color: #222;
    background-color: #f5f7fa;
}

h1 {
    text-align: center;
    margin-bottom: 10px;
}

.subtitle {
    text-align: center;
    color: #555;
    margin-bottom: 50px;
}

section {
    background: #ffffff;
    border-radius: 14px;
    padding: 40px;
    margin-bottom: 50px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.08);
}

h2 {
    margin-top: 0;
    border-left: 6px solid #4CAF50;
    padding-left: 14px;
}

p {
    margin: 14px 0;
}

ul {
    margin-left: 22px;
}

img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 28px auto 10px;
    border-radius: 12px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.12);
}

.highlight {
    background: #e8f5e9;
    border-left: 6px solid #4caf50;
    padding: 16px 20px;
    border-radius: 8px;
    margin: 20px 0;
    font-size: 16px;
}

.warning {
    background: #fff3e0;
    border-left: 6px solid #ff9800;
    padding: 16px 20px;
    border-radius: 8px;
    margin: 20px 0;
}

a {
    color: #2e7d32;
    text-decoration: none;
    font-weight: bold;
}

a:hover {
    text-decoration: underline;
}

/* Code block */
.code-block {
    position: relative;
    background: #0d1117;
    color: #c9d1d9;
    border-radius: 12px;
    padding: 20px;
    margin: 30px 0;
    font-family: Consolas, Monaco, monospace;
    font-size: 14px;
    overflow-x: auto;
}

.code-block pre {
    margin: 0;
    white-space: pre;
}

.copy-btn {
    position: absolute;
    top: 12px;
    right: 12px;
    background: #238636;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 6px 14px;
    cursor: pointer;
    font-size: 13px;
}

.copy-btn:hover {
    background: #2ea043;
}
</style>
</head>

<body>

<h1>ESP32-S3 MicroPython ç´…ç¶ ç‡ˆæ•™å­¸</h1>
<div class="subtitle">ä½¿ç”¨ Timer å®šæ™‚å™¨å¯¦ä½œäº¤é€šè™ŸèªŒï¼ˆå…±é™°æ¥µ LEDï¼‰</div>

<section>
<h2>ç¬¬ä¸€æ­¥ï¼šç¡¬é«”èˆ‡åŸç†èªªæ˜</h2>

<p>
æœ¬æ•™å­¸ä½¿ç”¨ <strong>Seeed XIAO ESP32-S3</strong> æ­é…ä¸‰é¡† LEDï¼Œ
æ¨¡æ“¬ã€Œç´…ã€ç¶ ã€é»ƒã€äº¤é€šè™ŸèªŒã€‚
</p>

<div class="highlight">
<strong>LED é¡å‹ï¼š</strong> å…±é™°æ¥µï¼ˆCommon Cathodeï¼‰<br>
<strong>æ§åˆ¶é‚è¼¯ï¼š</strong><br>
GPIO = <strong>1</strong> â†’ LED äº®<br>
GPIO = <strong>0</strong> â†’ LED æ»…
</div>

<p><strong>GPIO è…³ä½é…ç½®ï¼š</strong></p>
<ul>
    <li>ğŸ”´ ç´…ç‡ˆï¼šGPIO 9</li>
    <li>ğŸŸ¡ é»ƒç‡ˆï¼šGPIO 8</li>
    <li>ğŸŸ¢ ç¶ ç‡ˆï¼šGPIO 7</li>
</ul>
<img src="../00-Assets/Pin-List.png" alt="Pin-List.png">

    <div class="source">
        åœ–ç‰‡ä¾†æºï¼š
        <a href="https://wiki.seeedstudio.com/xiao_esp32s3_getting_started/" target="_blank">
            Seeed Studio å®˜æ–¹æ–‡ä»¶
        </a>
    </div>

<img src="../00-Assets/B02-TrafficLightLEDModule.jpeg" alt="B02-TrafficLightLEDModule.jpeg">
</section>

<section>
<h2>ç¬¬äºŒæ­¥ï¼šTimer å®šæ™‚å™¨æ¦‚å¿µ</h2>

<p>
MicroPython çš„ <code>Timer</code> å¯ä»¥åœ¨èƒŒæ™¯å®šæ™‚åŸ·è¡Œç¨‹å¼ï¼Œ
ä¸éœ€è¦ä½¿ç”¨ <code>while True</code> æ­é… <code>sleep()</code>ã€‚
</p>

<ul>
    <li>æœ¬ç¯„ä¾‹ä½¿ç”¨ <strong>æ¯ 1 ç§’</strong> åˆ‡æ›ä¸€æ¬¡ç‡ˆè™Ÿ</li>
    <li>ç‡ˆè™Ÿé †åºï¼šç´… â†’ ç¶  â†’ é»ƒ â†’ é‡è¤‡</li>
</ul>

<div class="warning">
<strong>æ³¨æ„ï¼š</strong><br>
Timer çš„ callback å‡½å¼ä¸­è«‹é¿å…ä½¿ç”¨ <code>sleep()</code>ï¼Œ
å¦å‰‡å¯èƒ½é€ æˆç³»çµ±ä¸ç©©å®šã€‚
</div>
</section>

<section>
<h2>ç¬¬ä¸‰æ­¥ï¼šMicroPython ç¨‹å¼ç¢¼</h2>

<p>å°‡ä»¥ä¸‹ç¨‹å¼ç¢¼è²¼åˆ° Thonnyï¼Œä¸¦ä¸Šå‚³åˆ° ESP32-S3 åŸ·è¡Œï¼š</p>

<div class="code-block">
<button class="copy-btn" onclick="copyCode(this)">Copy</button>
<pre><code>
from machine import Pin, Timer
# å¾ machine æ¨¡çµ„åŒ¯å…¥ Pinï¼ˆæ§åˆ¶è…³ä½ï¼‰èˆ‡ Timerï¼ˆå®šæ™‚å™¨ï¼‰

# === LED è…³ä½è¨­å®šï¼ˆå…±é™°æ¥µï¼šGPIO=1 äº®ï¼‰ ===
red = Pin(9, Pin.OUT)
yellow = Pin(8, Pin.OUT)
green = Pin(7, Pin.OUT)

# === ç‡ˆè™Ÿç‹€æ…‹è¡¨ ===
# æ¯ä¸€çµ„ä»£è¡¨ (ç´…ç‡ˆ, ç¶ ç‡ˆ, é»ƒç‡ˆ)
# 1 = äº®ï¼Œ0 = æ»…
states = [
    (1, 0, 0),  # ç´…ç‡ˆ
    (0, 1, 0),  # ç¶ ç‡ˆ
    (0, 0, 1),  # é»ƒç‡ˆ
]

state_index = 0

def update_led(timer):
    global state_index

    r, g, y = states[state_index]

    red.value(r)
    green.value(g)
    yellow.value(y)

    state_index = (state_index + 1) % len(states)

# === è¨­å®šå®šæ™‚å™¨ ===
tim = Timer(0)
tim.init(
    period=1000,          # 1 ç§’
    mode=Timer.PERIODIC,
    callback=update_led
)
</code></pre>
</div>
</section>

<section>
<h2>åŸ·è¡Œçµæœ</h2>

<ul>
    <li>ğŸ”´ ç´…ç‡ˆäº® 1 ç§’</li>
    <li>ğŸŸ¢ ç¶ ç‡ˆäº® 1 ç§’</li>
    <li>ğŸŸ¡ é»ƒç‡ˆäº® 1 ç§’</li>
    <li>å¾ªç’°ä¸åœæ­¢ï¼ˆTimer é€±æœŸåŸ·è¡Œï¼‰</li>
</ul>

<div class="highlight">
é€™å€‹ç¯„ä¾‹éå¸¸é©åˆå»¶ä¼¸æˆï¼š<br>
âœ” äº¤é€šè™ŸèªŒæ¨¡æ“¬<br>
âœ” ç‹€æ…‹æ©Ÿï¼ˆState Machineï¼‰æ•™å­¸<br>
âœ” éé˜»å¡å¼ç¨‹å¼è¨­è¨ˆç¤ºç¯„
</div>
</section>
<section>
    <h2>å®Œæ•´æ“ä½œå½±ç‰‡æ•™å­¸</h2>

    <div class="video">
        <a href="https://youtu.be/XiF4OPEbo3w" target="_blank">
            <img src="http://img.youtube.com/vi/XiF4OPEbo3w/0.jpg" alt="å®Œæ•´æ­¥é©Ÿå½±ç‰‡">
        </a>
    </div>
</section>
<script>
function copyCode(btn) {
    const code = btn.nextElementSibling.innerText;
    navigator.clipboard.writeText(code);
    btn.innerText = "Copied!";
    setTimeout(() => btn.innerText = "Copy", 1500);
}
</script>

</body>
</html>
